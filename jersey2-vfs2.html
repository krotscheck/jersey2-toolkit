
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2014-10-01
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>jersey2-vfs2 | jersey2-toolkit</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/cosmo/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="https://krotscheck.github.io/jersey2-toolkit/css/bootswatch.css" rel="stylesheet" />
		<link href="https://krotscheck.github.io/jersey2-toolkit/css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />

		<link href="https://krotscheck.github.io/jersey2-toolkit/css/lightbox.css" rel="stylesheet" />

		<link href="https://krotscheck.github.io/jersey2-toolkit/css/site.css" rel="stylesheet" />
		<link href="https://krotscheck.github.io/jersey2-toolkit/css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<link rel="author" href="https://plus.google.com/+MichaelKrotscheck"/>
		<!-- Google Analytics -->
		<script type="text/javascript">

			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-52636237-1']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();

		</script>
		</head>

	<body class="page-jersey2-vfs2 project-jersey2-toolkit" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="https://krotscheck.github.io/jersey2-toolkit">jersey2-toolkit</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="http://github.com/krotscheck/jersey2-toolkit/" title="GitHub project" class="externalLink">GitHub project</a></li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="jersey2-util.html" title="jersey2-util">jersey2-util</a></li>
									<li ><a href="jersey2-configuration.html" title="jersey2-configuration">jersey2-configuration</a></li>
									<li ><a href="jersey2-hibernate.html" title="jersey2-hibernate">jersey2-hibernate</a></li>
									<li class="active"><a href="" title="jersey2-vfs2">jersey2-vfs2</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="contribute.html" title="Contribute">Contribute</a></li>
									<li ><a href="issues/" title="Issues">Issues</a></li>
									<li ><a href="http://github.com/krotscheck/jersey2-toolkit/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
									<li ><a href="license.html" title="License">License</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<h1>jersey2-vfs2</h1> 
<p><span class="lead">Apache VFS2 (Virtual File System 2) jersey injectors.</span></p> 
<p>This library provides HK2 injectors and container lifecycle components for Apache’s Commons Virtual File System. This feature <b>does not</b> include filesystem adapters, though you can add any that you wish by using VFS2’s <a class="externalLink" href="http://commons.apache.org/proper/commons-vfs/api.html">xml configuration</a>.</p> 
<div class="source"> 
 <div class="source"> 
  <pre>&lt;dependency&gt;
    &lt;groupId&gt;net.krotscheck.jersey2&lt;/groupId&gt;
    &lt;artifactId&gt;jersey2-vfs2&lt;/artifactId&gt;
    &lt;version&gt;1.1.13&lt;/version&gt;
&lt;/dependency&gt;
</pre>
 </div>
</div> 
<div class="section"> 
 <h2 id="Quickstart">Quickstart</h2> 
 <p>First, register the feature in your application in accordance with the <a class="externalLink" href="https://jersey.java.net/documentation/latest/deployment.html#environmenmt.appmodel">Jersey2 Application Model</a>.</p> 
 <div class="source"> 
  <div class="source"> 
   <pre>import net.krotscheck.jersey2.vfs2.VFS2Feature;
import org.glassfish.jersey.server.ResourceConfig;

public class YourApplication extends ResourceConfig {
    public YourApplication() {
        register(VFS2Feature.class);
    }
}
</pre>
  </div>
 </div> 
 <p>Second, configure a default VFS2 filesystem, by using the jersey2-toolkit configuration file at <tt>/src/main/resources/jersey2-toolkit.properties</tt> (create if necessary) and adding the following parameter:</p> 
 <div class="source"> 
  <div class="source"> 
   <pre>vfs2.default = ram://path
</pre>
  </div>
 </div> 
 <p>This will provide a request-scoped FileSystem within your application that is named “default”. If this is the only FileSystem in your container, you may simply inject it by type. If there are more (see below) you must explicitly name it using the <tt>@Named(&quot;default&quot;)</tt> annotation.</p>
</div> 
<div class="section"> 
 <h2 id="Adding_more_FileSystem_factories">Adding more FileSystem factories</h2> 
 <p>Since in most applications you will need more than one file system, and the HK2 injector does not provide a way to build name-injected factories, an <tt>AbstractFileSystemFactory</tt> is provided for you to extend. It requires three steps to use.</p> 
 <p>First, extend the factory:</p> 
 <div class="source"> 
  <div class="source"> 
   <pre>public static final class CustomFileSystemFactory
        extends AbstractFileSystemFactory {

    private static final String NAME = &quot;customFileSystemName&quot;;

    @Override
    public String getFileSystemName() {
        return NAME;
    }

    // A binder for your application.
    public static final class Binder extends AbstractBinder {

        @Override
        protected void configure() {
            bindFactory(CustomFileSystemFactory.class)
                    .to(FileSystem.class)
                    .named(NAME)
                    .in(PerRequest.class);
        }
    }
}
</pre>
  </div>
 </div> 
 <p>Second, add a configuration entry in <tt>/src/main/resources/jersey2-toolkit.properties</tt>. Make sure that the name from the factory matches the name after <tt>vfs2</tt>:</p> 
 <div class="source"> 
  <div class="source"> 
   <pre>vfs2.customFileSystemName = ram://path
</pre>
  </div>
 </div> 
 <p>Lastly, bind the factory into your scope:</p> 
 <div class="source"> 
  <div class="source"> 
   <pre>public final class MyFeature implements Feature {

    @Override
    public boolean configure(final FeatureContext context) {
        context.register(new CustomFileSystemFactory.Binder());
        return true;
    }
}
</pre>
  </div>
 </div> 
 <hr />
</div> 
<div class="section"> 
 <h2 id="Provided_Components">Provided Components</h2> 
 <p>This feature provides the following components and component binders. Scope, Types, and Names are provided.</p> 
 <div class="section"> 
  <h3 id="FileSystemManager"><tt>FileSystemManager</tt></h3> 
  <p>A VFS FileSystemManager, used as the singleton source of all filesystems. If you want closer control over the lifecycle of your <tt>FileSystem</tt>s, or wich to resolve <tt>FileObjects</tt> directly, you may inject this and use it as you see fit.</p> 
  <ul> 
   <li><i>Scope:</i> Singleton</li> 
   <li><i>Type:</i> org.apache.commons.vfs2.FileSystemManager</li> 
  </ul> 
  <div class="source"> 
   <div class="source"> 
    <pre>@Path(&quot;/path&quot;)
public class MyService {

    @Inject
    public FileSystemManager fsManager;

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getMethod() {
        return Response.ok().build();
    }
}
</pre>
   </div>
  </div>
 </div> 
 <div class="section"> 
  <h3 id="FileSystem"><tt>FileSystem</tt></h3> 
  <p>A default filesystem factory, which is created and destroyed with every request. This is to ensure that all transactions are atomic, and failures in one request do not propagate to others.</p> 
  <ul> 
   <li><i>Scope:</i> PerRequest</li> 
   <li><i>Type:</i> org.apache.commons.vfs2.FileSystem</li> 
   <li><i>Name:</i> “default”</li> 
  </ul> 
  <div class="source"> 
   <div class="source"> 
    <pre>@Path(&quot;/path&quot;)
public class MyService {

    @Inject
    @Named(&quot;default&quot;)
    public FileSystem defaultFileSystem;

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getMethod() {
        return Response.ok().build();
    }
}
</pre>
   </div>
  </div>
 </div>
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="index.html" title="Home">Home</a>
						</li>
						<li >
							<a href="http://github.com/krotscheck/jersey2-toolkit/" title="GitHub Project" class="externalLink">GitHub Project</a>
						</li>
						<li >
							<a href="release-notes.html" title="Release Notes">Release Notes</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Contribute</li>
						<li >
							<a href="contribute.html" title="Contribute">Contribute</a>
						</li>
						<li >
							<a href="issues/" title="Issues">Issues</a>
						</li>
						<li >
							<a href="http://github.com/krotscheck/jersey2-toolkit/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
						<li >
							<a href="license.html" title="License">License</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Features</li>
						<li >
							<a href="jersey2-util.html" title="jersey2-util">jersey2-util</a>
						</li>
						<li >
							<a href="jersey2-configuration.html" title="jersey2-configuration">jersey2-configuration</a>
						</li>
						<li >
							<a href="jersey2-hibernate.html" title="jersey2-hibernate">jersey2-hibernate</a>
						</li>
						<li class="active">
							<a href="#" title="jersey2-vfs2">jersey2-vfs2</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Project Documentation</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
						<li >
							<a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2014 <a href="http://www.krotscheck.net">krotscheck.net</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 1.1.13. </span></p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="https://krotscheck.github.io/jersey2-toolkit/js/lightbox.min.js"></script>
	<script src="https://krotscheck.github.io/jersey2-toolkit/js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="https://krotscheck.github.io/jersey2-toolkit/js/reflow-skin.js"></script>

	</body>
</html>
